{"ast":null,"code":"import { SelectionPathMode } from '../../../enums';\nexport default function FamSelectionPathItemsTask(navigationFamilyTask, cursorItemTask, selectedItemsTask, cursorSelectionPathModeOptionTask) {\n  var _data = {\n    items: []\n  };\n\n  function process() {\n    var selectionPathMode = cursorSelectionPathModeOptionTask.getSelectionPathMode(),\n        navigationFamily = navigationFamilyTask.getLogicalFamily(),\n        cursorTreeItemId = cursorItemTask.getCursorTreeItem(),\n        selectedItems = selectedItemsTask.getItems().slice(0);\n    selectedItems.push(cursorTreeItemId);\n    _data.items = getSelectionPathItems(selectedItems, navigationFamily, selectionPathMode);\n    return true;\n  }\n\n  function getSelectionPathItems(selectedItems, navigationFamily, selectionPathMode) {\n    var result = [],\n        processed = {},\n        selectedItem,\n        index,\n        len;\n\n    for (index = 0, len = selectedItems.length; index < len; index += 1) {\n      selectedItem = selectedItems[index];\n      /* show cursor full stack */\n\n      switch (selectionPathMode) {\n        case SelectionPathMode.None:\n          break;\n\n        case SelectionPathMode.FullStack:\n          /* select all parents up to the root */\n          navigationFamily.loopParents(this, selectedItem, function (parentItemId, parentItem) {\n            if (processed[parentItemId] != null) {\n              return navigationFamily.SKIP;\n            }\n\n            if (parentItem.isVisible) {\n              result.push(parentItemId);\n            }\n\n            processed[parentItemId] = true;\n          });\n          break;\n      }\n    }\n\n    return result;\n  }\n\n  function getItems() {\n    return _data.items;\n  }\n\n  return {\n    process: process,\n    getItems: getItems\n  };\n}\n;","map":{"version":3,"sources":["/Users/01005901/go/src/github.com/Resily/react/node_modules/basicprimitives/src/tasks/transformations/selection/FamSelectionPathItemsTask.js"],"names":["SelectionPathMode","FamSelectionPathItemsTask","navigationFamilyTask","cursorItemTask","selectedItemsTask","cursorSelectionPathModeOptionTask","_data","items","process","selectionPathMode","getSelectionPathMode","navigationFamily","getLogicalFamily","cursorTreeItemId","getCursorTreeItem","selectedItems","getItems","slice","push","getSelectionPathItems","result","processed","selectedItem","index","len","length","None","FullStack","loopParents","parentItemId","parentItem","SKIP","isVisible"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,gBAAlC;AAEA,eAAe,SAASC,yBAAT,CAAmCC,oBAAnC,EAAyDC,cAAzD,EAAyEC,iBAAzE,EAA4FC,iCAA5F,EAA+H;AAC5I,MAAIC,KAAK,GAAG;AACVC,IAAAA,KAAK,EAAE;AADG,GAAZ;;AAIA,WAASC,OAAT,GAAmB;AACjB,QAAIC,iBAAiB,GAAGJ,iCAAiC,CAACK,oBAAlC,EAAxB;AAAA,QACEC,gBAAgB,GAAGT,oBAAoB,CAACU,gBAArB,EADrB;AAAA,QAEEC,gBAAgB,GAAGV,cAAc,CAACW,iBAAf,EAFrB;AAAA,QAGEC,aAAa,GAAGX,iBAAiB,CAACY,QAAlB,GAA6BC,KAA7B,CAAmC,CAAnC,CAHlB;AAKAF,IAAAA,aAAa,CAACG,IAAd,CAAmBL,gBAAnB;AAEAP,IAAAA,KAAK,CAACC,KAAN,GAAcY,qBAAqB,CAACJ,aAAD,EAAgBJ,gBAAhB,EAAkCF,iBAAlC,CAAnC;AAEA,WAAO,IAAP;AACD;;AAED,WAASU,qBAAT,CAA+BJ,aAA/B,EAA8CJ,gBAA9C,EAAgEF,iBAAhE,EAAmF;AACjF,QAAIW,MAAM,GAAG,EAAb;AAAA,QACEC,SAAS,GAAG,EADd;AAAA,QAEEC,YAFF;AAAA,QAGEC,KAHF;AAAA,QAGSC,GAHT;;AAKA,SAAKD,KAAK,GAAG,CAAR,EAAWC,GAAG,GAAGT,aAAa,CAACU,MAApC,EAA4CF,KAAK,GAAGC,GAApD,EAAyDD,KAAK,IAAI,CAAlE,EAAqE;AACnED,MAAAA,YAAY,GAAGP,aAAa,CAACQ,KAAD,CAA5B;AACA;;AACA,cAAQd,iBAAR;AACE,aAAKT,iBAAiB,CAAC0B,IAAvB;AACE;;AACF,aAAK1B,iBAAiB,CAAC2B,SAAvB;AACE;AACAhB,UAAAA,gBAAgB,CAACiB,WAAjB,CAA6B,IAA7B,EAAmCN,YAAnC,EAAiD,UAAUO,YAAV,EAAwBC,UAAxB,EAAoC;AACnF,gBAAIT,SAAS,CAACQ,YAAD,CAAT,IAA2B,IAA/B,EAAqC;AACnC,qBAAOlB,gBAAgB,CAACoB,IAAxB;AACD;;AACD,gBAAID,UAAU,CAACE,SAAf,EAA0B;AACxBZ,cAAAA,MAAM,CAACF,IAAP,CAAYW,YAAZ;AACD;;AACDR,YAAAA,SAAS,CAACQ,YAAD,CAAT,GAA0B,IAA1B;AACD,WARD;AASA;AAdJ;AAgBD;;AACD,WAAOT,MAAP;AACD;;AAED,WAASJ,QAAT,GAAoB;AAClB,WAAOV,KAAK,CAACC,KAAb;AACD;;AAED,SAAO;AACLC,IAAAA,OAAO,EAAEA,OADJ;AAELQ,IAAAA,QAAQ,EAAEA;AAFL,GAAP;AAID;AAAA","sourcesContent":["import { SelectionPathMode } from '../../../enums';\n\nexport default function FamSelectionPathItemsTask(navigationFamilyTask, cursorItemTask, selectedItemsTask, cursorSelectionPathModeOptionTask) {\n  var _data = {\n    items: []\n  };\n\n  function process() {\n    var selectionPathMode = cursorSelectionPathModeOptionTask.getSelectionPathMode(),\n      navigationFamily = navigationFamilyTask.getLogicalFamily(),\n      cursorTreeItemId = cursorItemTask.getCursorTreeItem(),\n      selectedItems = selectedItemsTask.getItems().slice(0);\n\n    selectedItems.push(cursorTreeItemId);\n\n    _data.items = getSelectionPathItems(selectedItems, navigationFamily, selectionPathMode);\n\n    return true;\n  }\n\n  function getSelectionPathItems(selectedItems, navigationFamily, selectionPathMode) {\n    var result = [],\n      processed = {},\n      selectedItem,\n      index, len;\n\n    for (index = 0, len = selectedItems.length; index < len; index += 1) {\n      selectedItem = selectedItems[index];\n      /* show cursor full stack */\n      switch (selectionPathMode) {\n        case SelectionPathMode.None:\n          break;\n        case SelectionPathMode.FullStack:\n          /* select all parents up to the root */\n          navigationFamily.loopParents(this, selectedItem, function (parentItemId, parentItem) {\n            if (processed[parentItemId] != null) {\n              return navigationFamily.SKIP;\n            }\n            if (parentItem.isVisible) {\n              result.push(parentItemId);\n            }\n            processed[parentItemId] = true;\n          });\n          break;\n      }\n    }\n    return result;\n  }\n\n  function getItems() {\n    return _data.items;\n  }\n\n  return {\n    process: process,\n    getItems: getItems\n  };\n};"]},"metadata":{},"sourceType":"module"}