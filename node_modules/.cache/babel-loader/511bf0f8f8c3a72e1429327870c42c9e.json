{"ast":null,"code":"import OrgEventArgs from './events/OrgEventArgs';\nimport Rect from './graphics/structs/Rect';\nimport { getElementOffset } from './graphics/dom';\nexport default function EventArgsFactory(data, oldTreeItemId, newTreeItemId, name) {\n  var result = new OrgEventArgs(),\n      combinedContextsTask = data.tasks.getTask(\"CombinedContextsTask\"),\n      alignDiagramTask = data.tasks.getTask(\"AlignDiagramTask\"),\n      oldItemConfig = combinedContextsTask.getConfig(oldTreeItemId),\n      newItemConfig = combinedContextsTask.getConfig(newTreeItemId),\n      itemPosition,\n      actualPosition,\n      offset,\n      panelOffset;\n\n  if (oldItemConfig && oldItemConfig.id != null) {\n    result.oldContext = oldItemConfig;\n  }\n\n  if (newItemConfig && newItemConfig.id != null) {\n    result.context = newItemConfig;\n\n    if (newItemConfig.parent !== null) {\n      result.parentItem = combinedContextsTask.getConfig(newItemConfig.parent);\n    }\n\n    panelOffset = getElementOffset(data.layout.mousePanel);\n    offset = getElementOffset(data.layout.element);\n    itemPosition = alignDiagramTask.getItemPosition(newTreeItemId), result.position = new Rect(itemPosition.actualPosition).translate(panelOffset.left, panelOffset.top).translate(-offset.left, -offset.top);\n  }\n\n  if (name != null) {\n    result.name = name;\n  }\n\n  return result;\n}\n;","map":{"version":3,"sources":["/Users/01005901/go/src/github.com/Resily/react/node_modules/basicprimitives/src/OrgEventArgsFactory.js"],"names":["OrgEventArgs","Rect","getElementOffset","EventArgsFactory","data","oldTreeItemId","newTreeItemId","name","result","combinedContextsTask","tasks","getTask","alignDiagramTask","oldItemConfig","getConfig","newItemConfig","itemPosition","actualPosition","offset","panelOffset","id","oldContext","context","parent","parentItem","layout","mousePanel","element","getItemPosition","position","translate","left","top"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,uBAAzB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AAEA,eAAe,SAASC,gBAAT,CAA0BC,IAA1B,EAAgCC,aAAhC,EAA+CC,aAA/C,EAA8DC,IAA9D,EAAoE;AACjF,MAAIC,MAAM,GAAG,IAAIR,YAAJ,EAAb;AAAA,MACES,oBAAoB,GAAGL,IAAI,CAACM,KAAL,CAAWC,OAAX,CAAmB,sBAAnB,CADzB;AAAA,MAEEC,gBAAgB,GAAGR,IAAI,CAACM,KAAL,CAAWC,OAAX,CAAmB,kBAAnB,CAFrB;AAAA,MAGEE,aAAa,GAAGJ,oBAAoB,CAACK,SAArB,CAA+BT,aAA/B,CAHlB;AAAA,MAIEU,aAAa,GAAGN,oBAAoB,CAACK,SAArB,CAA+BR,aAA/B,CAJlB;AAAA,MAKEU,YALF;AAAA,MAMEC,cANF;AAAA,MAOEC,MAPF;AAAA,MAQEC,WARF;;AAUA,MAAIN,aAAa,IAAIA,aAAa,CAACO,EAAd,IAAoB,IAAzC,EAA+C;AAC7CZ,IAAAA,MAAM,CAACa,UAAP,GAAoBR,aAApB;AACD;;AAED,MAAIE,aAAa,IAAIA,aAAa,CAACK,EAAd,IAAoB,IAAzC,EAA+C;AAC7CZ,IAAAA,MAAM,CAACc,OAAP,GAAiBP,aAAjB;;AAEA,QAAIA,aAAa,CAACQ,MAAd,KAAyB,IAA7B,EAAmC;AACjCf,MAAAA,MAAM,CAACgB,UAAP,GAAoBf,oBAAoB,CAACK,SAArB,CAA+BC,aAAa,CAACQ,MAA7C,CAApB;AACD;;AAEDJ,IAAAA,WAAW,GAAGjB,gBAAgB,CAACE,IAAI,CAACqB,MAAL,CAAYC,UAAb,CAA9B;AACAR,IAAAA,MAAM,GAAGhB,gBAAgB,CAACE,IAAI,CAACqB,MAAL,CAAYE,OAAb,CAAzB;AACAX,IAAAA,YAAY,GAAGJ,gBAAgB,CAACgB,eAAjB,CAAiCtB,aAAjC,CAAf,EACEE,MAAM,CAACqB,QAAP,GAAkB,IAAI5B,IAAJ,CAASe,YAAY,CAACC,cAAtB,EACfa,SADe,CACLX,WAAW,CAACY,IADP,EACaZ,WAAW,CAACa,GADzB,EAEfF,SAFe,CAEL,CAACZ,MAAM,CAACa,IAFH,EAES,CAACb,MAAM,CAACc,GAFjB,CADpB;AAID;;AAED,MAAIzB,IAAI,IAAI,IAAZ,EAAkB;AAChBC,IAAAA,MAAM,CAACD,IAAP,GAAcA,IAAd;AACD;;AAED,SAAOC,MAAP;AACD;AAAA","sourcesContent":["import OrgEventArgs from './events/OrgEventArgs';\nimport Rect from './graphics/structs/Rect';\nimport { getElementOffset } from './graphics/dom';\n\nexport default function EventArgsFactory(data, oldTreeItemId, newTreeItemId, name) {\n  var result = new OrgEventArgs(),\n    combinedContextsTask = data.tasks.getTask(\"CombinedContextsTask\"),\n    alignDiagramTask = data.tasks.getTask(\"AlignDiagramTask\"),\n    oldItemConfig = combinedContextsTask.getConfig(oldTreeItemId),\n    newItemConfig = combinedContextsTask.getConfig(newTreeItemId),\n    itemPosition,\n    actualPosition,\n    offset,\n    panelOffset;\n\n  if (oldItemConfig && oldItemConfig.id != null) {\n    result.oldContext = oldItemConfig;\n  }\n\n  if (newItemConfig && newItemConfig.id != null) {\n    result.context = newItemConfig;\n\n    if (newItemConfig.parent !== null) {\n      result.parentItem = combinedContextsTask.getConfig(newItemConfig.parent);\n    }\n\n    panelOffset = getElementOffset(data.layout.mousePanel);\n    offset = getElementOffset(data.layout.element);\n    itemPosition = alignDiagramTask.getItemPosition(newTreeItemId),\n      result.position = new Rect(itemPosition.actualPosition)\n        .translate(panelOffset.left, panelOffset.top)\n        .translate(-offset.left, -offset.top);\n  }\n\n  if (name != null) {\n    result.name = name;\n  }\n\n  return result;\n};\n"]},"metadata":{},"sourceType":"module"}