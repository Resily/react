{"ast":null,"code":"import { isObject } from '../common';\nexport default function ObjectReader(dataTemplate, isNullable, defaultValue) {\n  this.dataTemplate = dataTemplate;\n  this.isNullable = isNullable;\n  this.defaultValue = defaultValue;\n}\n;\n\nObjectReader.prototype.read = function (target, source, path, context) {\n  var result = null,\n      isTargetObject = isObject(target),\n      property,\n      propertyDataTemplate;\n\n  if (!source) {\n    source = this.isNullable ? null : this.defaultValue;\n  }\n\n  if (isObject(source)) {\n    result = {};\n\n    for (property in this.dataTemplate) {\n      if (this.dataTemplate.hasOwnProperty(property)) {\n        propertyDataTemplate = this.dataTemplate[property];\n        result[property] = propertyDataTemplate.read(isTargetObject ? target[property] : null, source[property], path + \"-\" + property, context);\n      }\n    }\n  } else {\n    result = source;\n\n    if (target !== source) {\n      context.isChanged = true;\n    }\n  }\n\n  return result;\n};","map":{"version":3,"sources":["/Users/01005901/go/src/github.com/Resily/react/node_modules/basicprimitives/src/readers/ObjectReader.js"],"names":["isObject","ObjectReader","dataTemplate","isNullable","defaultValue","prototype","read","target","source","path","context","result","isTargetObject","property","propertyDataTemplate","hasOwnProperty","isChanged"],"mappings":"AAAA,SAASA,QAAT,QAAyB,WAAzB;AAEA,eAAe,SAASC,YAAT,CAAsBC,YAAtB,EAAoCC,UAApC,EAAgDC,YAAhD,EAA8D;AAC3E,OAAKF,YAAL,GAAoBA,YAApB;AACA,OAAKC,UAAL,GAAkBA,UAAlB;AACA,OAAKC,YAAL,GAAoBA,YAApB;AACD;AAAA;;AAEDH,YAAY,CAACI,SAAb,CAAuBC,IAAvB,GAA8B,UAAUC,MAAV,EAAkBC,MAAlB,EAA0BC,IAA1B,EAAgCC,OAAhC,EAAyC;AACrE,MAAIC,MAAM,GAAG,IAAb;AAAA,MACEC,cAAc,GAAGZ,QAAQ,CAACO,MAAD,CAD3B;AAAA,MAEEM,QAFF;AAAA,MAGEC,oBAHF;;AAKA,MAAI,CAACN,MAAL,EAAa;AACXA,IAAAA,MAAM,GAAG,KAAKL,UAAL,GAAkB,IAAlB,GAAyB,KAAKC,YAAvC;AACD;;AAED,MAAIJ,QAAQ,CAACQ,MAAD,CAAZ,EAAsB;AACpBG,IAAAA,MAAM,GAAG,EAAT;;AAEA,SAAKE,QAAL,IAAiB,KAAKX,YAAtB,EAAoC;AAClC,UAAI,KAAKA,YAAL,CAAkBa,cAAlB,CAAiCF,QAAjC,CAAJ,EAAgD;AAC9CC,QAAAA,oBAAoB,GAAG,KAAKZ,YAAL,CAAkBW,QAAlB,CAAvB;AAEAF,QAAAA,MAAM,CAACE,QAAD,CAAN,GAAmBC,oBAAoB,CAACR,IAArB,CAA0BM,cAAc,GAAGL,MAAM,CAACM,QAAD,CAAT,GAAsB,IAA9D,EAAoEL,MAAM,CAACK,QAAD,CAA1E,EAAsFJ,IAAI,GAAG,GAAP,GAAaI,QAAnG,EAA6GH,OAA7G,CAAnB;AACD;AACF;AACF,GAVD,MAUO;AACLC,IAAAA,MAAM,GAAGH,MAAT;;AAEA,QAAID,MAAM,KAAKC,MAAf,EAAuB;AACrBE,MAAAA,OAAO,CAACM,SAAR,GAAoB,IAApB;AACD;AACF;;AACD,SAAOL,MAAP;AACD,CA5BD","sourcesContent":["import { isObject } from '../common';\n\nexport default function ObjectReader(dataTemplate, isNullable, defaultValue) {\n  this.dataTemplate = dataTemplate;\n  this.isNullable = isNullable;\n  this.defaultValue = defaultValue;\n};\n\nObjectReader.prototype.read = function (target, source, path, context) {\n  var result = null,\n    isTargetObject = isObject(target),\n    property,\n    propertyDataTemplate;\n\n  if (!source) {\n    source = this.isNullable ? null : this.defaultValue;\n  }\n\n  if (isObject(source)) {\n    result = {};\n\n    for (property in this.dataTemplate) {\n      if (this.dataTemplate.hasOwnProperty(property)) {\n        propertyDataTemplate = this.dataTemplate[property];\n\n        result[property] = propertyDataTemplate.read(isTargetObject ? target[property] : null, source[property], path + \"-\" + property, context);\n      }\n    }\n  } else {\n    result = source;\n\n    if (target !== source) {\n      context.isChanged = true;\n    }\n  }\n  return result;\n};"]},"metadata":{},"sourceType":"module"}