{"ast":null,"code":"import _objectSpread from\"/Users/01005901/go/src/github.com/Resily/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _createClass from\"/Users/01005901/go/src/github.com/Resily/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _classCallCheck from\"/Users/01005901/go/src/github.com/Resily/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import React from'react';import{LineType,Layers,SegmentType,Rect,Size}from'basicprimitives';import RotatedText from'./Templates/RotatedText';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Placeholder=function Placeholder(name){_classCallCheck(this,Placeholder);this.name=name;this.layers={};this.activeLayer=null;this.size=null;this.rect=null;this.hasGraphics=true;this.isVisible=true;};;var Layer=/*#__PURE__*/function(){function Layer(name){_classCallCheck(this,Layer);this.name=name;this.items=[];this.polylines=[];}_createClass(Layer,[{key:\"reset\",value:function reset(){this.items=[];this.polylines=[];}}]);return Layer;}();;var Graphics=/*#__PURE__*/function(){function Graphics(size){_classCallCheck(this,Graphics);this.placeholders={};this.activePlaceholder=null;this.size=size;this.hasGraphics=true;this.names=Object.keys(Layers).reduce(function(agg,key){agg[Layers[key]]=key;return agg;},[]);this.orientations=['Horizontal','RotateLeft','RotateRight','Horizontal'];this.horizontalAlignments=['center','left','right'];this.verticalAlignments=['top','middle','bottom'];}_createClass(Graphics,[{key:\"clean\",value:function clean(){this.placeholders={};this.activePlaceholder=null;}},{key:\"resize\",value:function resize(name,width,height){this.activatePlaceholder(name);this.resizePlaceholder(this.activePlaceholder,0,0,width,height);}},{key:\"position\",value:function position(name,left,top,width,height){this.activatePlaceholder(name);this.resizePlaceholder(this.activePlaceholder,left,top,width,height);}},{key:\"show\",value:function show(name){var placeholder=this.placeholders[name];if(placeholder!=null){placeholder.isVisible=true;}}},{key:\"hide\",value:function hide(name){var placeholder=this.placeholders[name];if(placeholder!=null){placeholder.isVisible=false;}}},{key:\"resizePlaceholder\",value:function resizePlaceholder(placeholder,left,top,width,height){placeholder.size=new Size(width,height);placeholder.rect=new Rect(left,top,width,height);}},{key:\"reset\",value:function reset(placeholderName,layerKey){var layerName=this.names[layerKey];var placeholder=this.placeholders[placeholderName];if(placeholder!=null){var layer=placeholder.layers[layerName];if(layer!=null){layer.reset();}}}},{key:\"activate\",value:function activate(placeholderName,layerKey){this.activatePlaceholder(placeholderName);this.activateLayer(layerKey);return this.activePlaceholder;}},{key:\"activatePlaceholder\",value:function activatePlaceholder(name){var placeholder=this.placeholders[name];if(placeholder===undefined){placeholder=new Placeholder(name);placeholder.size=this.size;placeholder.rect=new Rect(0,0,placeholder.size.width,placeholder.size.height);this.placeholders[name]=placeholder;}this.activePlaceholder=placeholder;}},{key:\"activateLayer\",value:function activateLayer(value){var name=this.names[value];var layer=this.activePlaceholder.layers[name];if(layer===undefined){layer=new Layer(name);this.activePlaceholder.layers[name]=layer;}this.activePlaceholder.activeLayer=layer;}},{key:\"map\",value:function map(thisArg,placeholderName,onLayer){var result=[];if(onLayer!=null){var placeholder=this.placeholders[placeholderName];this.names.forEach(function(layerKey){var layer=placeholder.layers[layerKey];if(layer!=null){result.push(onLayer.call(thisArg,layerKey,/*#__PURE__*/_jsxs(React.Fragment,{children:[layer.polylines.length>0?/*#__PURE__*/_jsx(\"svg\",{height:placeholder.size.height,width:placeholder.size.width,children:layer.polylines}):null,layer.items]})));}});}return result;}},{key:\"text\",value:function text(x,y,width,height,label,orientation,horizontalAlignment,verticalAlignment,attr){this.activePlaceholder.activeLayer.items.push(/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({position:\"absolute\",overflow:\"visible\",fontFamily:\"Trebuchet MS, Tahoma, Verdana, Arial, sans-serif\",WebkitTapHighlightColor:\"rgba(0,0,0,0)\",WebkitUserSelect:\"none\",WebkitTouchCallout:\"none\",KhtmlUserSelect:\"none\",MozUserSelect:\"none\",msUserSelect:\"none\",userSelect:\"none\",boxSizing:\"content-box\"},attr),{},{top:y+\"px\",left:x+\"px\"}),children:/*#__PURE__*/_jsx(RotatedText,{width:width,height:height,orientation:this.orientations[orientation],horizontalAlignment:this.horizontalAlignments[horizontalAlignment],verticalAlignment:this.verticalAlignments[verticalAlignment],children:label})},this.activePlaceholder.activeLayer.items.length));}},{key:\"polylinesBuffer\",value:function polylinesBuffer(buffer){buffer.loop(this,function(polyline){if(polyline.length()>0){this.polyline(polyline);}});}},{key:\"polyline\",value:function polyline(polylineData){var data,attr=polylineData.paletteItem.toAttr(),step,radius,cornerRadius,style={};if(attr.fillColor!==undefined){style.fill=attr.fillColor;style.fillOpacity=attr.opacity;}else{style.fillOpacity=0;}if(attr.lineWidth!==undefined&&attr.borderColor!==undefined){style.stroke=attr.borderColor;style.strokeWidth=attr.lineWidth;if(attr.opacity!==undefined){style.strokeOpacity=attr.opacity;}else{style.strokeOpacity=1;}}else{style.stroke=\"transparent\";style.strokeWidth=0;}if(attr.lineType!=null){step=Math.round(attr.lineWidth)||1;switch(attr.lineType){case LineType.Dotted:style.strokeDasharray=step+\",\"+step;break;case LineType.Dashed:style.strokeDasharray=step*5+\",\"+step*3;break;case LineType.Solid:default:style.strokeDasharray=\"\";break;}}data=\"\";polylineData.loop(this,function(segment){switch(segment.segmentType){case SegmentType.Move:data+=\"M\"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y)+0.5);break;case SegmentType.Line:data+=\"L\"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y)+0.5);break;case SegmentType.QuadraticArc:data+=\"Q\"+(Math.round(segment.cpX)+0.5)+\" \"+(Math.round(segment.cpY)+0.5)+\" \"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y)+0.5);break;case SegmentType.Dot:// A rx, ry, x-axis-rotation, large-arc-flag, sweep-flag, x, y\nif(segment.width===segment.height&&segment.width/2.0<=segment.cornerRadius){// dot\nradius=segment.width/2.0;data+=\"M\"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y)+segment.height/2.0+0.5);data+=\"A\"+radius+\" \"+radius+\" 0 0 0 \"+(Math.round(segment.x+segment.width)+0.5)+\" \"+(Math.round(segment.y)+segment.height/2.0+0.5);data+=\"A\"+radius+\" \"+radius+\" 0 0 0 \"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y)+segment.height/2.0+0.5);}else if(segment.cornerRadius===0){// square\ndata+=\"M\"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y)+0.5);data+=\"L\"+(Math.round(segment.x+segment.width)+0.5)+\" \"+(Math.round(segment.y)+0.5);data+=\"L\"+(Math.round(segment.x+segment.width)+0.5)+\" \"+(Math.round(segment.y+segment.height)+0.5);data+=\"L\"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y+segment.height)+0.5);data+=\"L\"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y)+0.5);}else{cornerRadius=Math.min(segment.cornerRadius,Math.min(segment.width/2.0,segment.height/2.0));data+=\"M\"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y+cornerRadius)+0.5);data+=\"A\"+Math.round(cornerRadius)+\" \"+Math.round(cornerRadius)+\" 0 0 1 \"+(Math.round(segment.x+cornerRadius)+0.5)+\" \"+(Math.round(segment.y)+0.5);data+=\"L\"+(Math.round(segment.x+segment.width-cornerRadius)+0.5)+\" \"+(Math.round(segment.y)+0.5);data+=\"A\"+Math.round(cornerRadius)+\" \"+Math.round(cornerRadius)+\" 0 0 1 \"+(Math.round(segment.x+segment.width)+0.5)+\" \"+(Math.round(segment.y+cornerRadius)+0.5);data+=\"L\"+(Math.round(segment.x+segment.width)+0.5)+\" \"+(Math.round(segment.y+segment.height-cornerRadius)+0.5);data+=\"A\"+Math.round(cornerRadius)+\" \"+Math.round(cornerRadius)+\" 0 0 1 \"+(Math.round(segment.x+segment.width-cornerRadius)+0.5)+\" \"+(Math.round(segment.y+segment.height)+0.5);data+=\"L\"+(Math.round(segment.x+cornerRadius)+0.5)+\" \"+(Math.round(segment.y+segment.height)+0.5);data+=\"A\"+Math.round(cornerRadius)+\" \"+Math.round(cornerRadius)+\" 0 0 1 \"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y+segment.height-cornerRadius)+0.5);data+=\"L\"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y+cornerRadius)+0.5);}break;case SegmentType.CubicArc:data+=\"C\"+(Math.round(segment.cpX1)+0.5)+\" \"+(Math.round(segment.cpY1)+0.5)+\" \"+(Math.round(segment.cpX2)+0.5)+\" \"+(Math.round(segment.cpY2)+0.5)+\" \"+(Math.round(segment.x)+0.5)+\" \"+(Math.round(segment.y)+0.5);break;default:break;}});this.activePlaceholder.activeLayer.polylines.push(/*#__PURE__*/_jsx(\"path\",{d:data,style:style},this.activePlaceholder.activeLayer.polylines.length));}},{key:\"template\",value:function template(x,y,width,height,contentx,contenty,contentWidth,contentHeight,_template,hashCode,onRenderTemplate,uiHash,attr){//ignore jslint\nvar style;var left=x+contentx,top=y+contenty,templateWidth=contentWidth,templateHeight=contentHeight;style=_objectSpread({\"width\":templateWidth+\"px\",\"height\":templateHeight+\"px\",\"top\":top+\"px\",\"left\":left+\"px\",\"position\":\"absolute\",\"padding\":\"0px\",\"margin\":\"0px\"},attr);if(uiHash==null){uiHash={};}uiHash.x=left;uiHash.y=top;uiHash.width=templateWidth;uiHash.height=templateHeight;if(onRenderTemplate!==null){this.activePlaceholder.activeLayer.items.push(/*#__PURE__*/_jsx(\"div\",{style:_objectSpread({position:\"absolute\",overflow:\"visible\",fontFamily:\"Trebuchet MS, Tahoma, Verdana, Arial, sans-serif\",WebkitTapHighlightColor:\"rgba(0,0,0,0)\",WebkitUserSelect:\"none\",WebkitTouchCallout:\"none\",KhtmlUserSelect:\"none\",MozUserSelect:\"none\",msUserSelect:\"none\",userSelect:\"none\",boxSizing:\"content-box\"},style),children:onRenderTemplate(uiHash)},this.activePlaceholder.activeLayer.items.length));};}},{key:\"getPxSize\",value:function getPxSize(value,base){var result=value;if(typeof value===\"string\"){if(value.indexOf(\"pt\")>0){result=parseInt(value,10)*96/72;}else if(value.indexOf(\"%\")>0){result=parseFloat(value)/100.0*base;}else{result=parseInt(value,10);}}return result;}}]);return Graphics;}();;export default Graphics;","map":{"version":3,"sources":["/Users/01005901/go/src/github.com/Resily/react/src/Diagrams/Graphics.js"],"names":["React","LineType","Layers","SegmentType","Rect","Size","RotatedText","Placeholder","name","layers","activeLayer","size","rect","hasGraphics","isVisible","Layer","items","polylines","Graphics","placeholders","activePlaceholder","names","Object","keys","reduce","agg","key","orientations","horizontalAlignments","verticalAlignments","width","height","activatePlaceholder","resizePlaceholder","left","top","placeholder","placeholderName","layerKey","layerName","layer","reset","activateLayer","undefined","value","thisArg","onLayer","result","forEach","push","call","length","x","y","label","orientation","horizontalAlignment","verticalAlignment","attr","position","overflow","fontFamily","WebkitTapHighlightColor","WebkitUserSelect","WebkitTouchCallout","KhtmlUserSelect","MozUserSelect","msUserSelect","userSelect","boxSizing","buffer","loop","polyline","polylineData","data","paletteItem","toAttr","step","radius","cornerRadius","style","fillColor","fill","fillOpacity","opacity","lineWidth","borderColor","stroke","strokeWidth","strokeOpacity","lineType","Math","round","Dotted","strokeDasharray","Dashed","Solid","segment","segmentType","Move","Line","QuadraticArc","cpX","cpY","Dot","min","CubicArc","cpX1","cpY1","cpX2","cpY2","contentx","contenty","contentWidth","contentHeight","template","hashCode","onRenderTemplate","uiHash","templateWidth","templateHeight","base","indexOf","parseInt","parseFloat"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { LineType, Layers, SegmentType,\n  Rect, Size\n} from 'basicprimitives';\nimport RotatedText from './Templates/RotatedText';\n\nclass Placeholder {\n  constructor(name) {\n    this.name = name;\n\n    this.layers = {};\n    this.activeLayer = null;\n\n    this.size = null;\n    this.rect = null;\n\n    this.hasGraphics = true;\n\n    this.isVisible = true;\n  }\n};\n\nclass Layer {\n  constructor(name) {\n    this.name = name;\n    this.items = [];\n    this.polylines = [];\n  }\n\n  reset() {\n    this.items = [];\n    this.polylines = [];\n  }\n};\n\nclass Graphics {\n  constructor(size) {\n    this.placeholders = {};\n    this.activePlaceholder = null;\n    this.size = size;\n    this.hasGraphics = true;\n\n    this.names = Object.keys(Layers).reduce((agg, key) => {\n      agg[Layers[key]] = key;\n      return agg;\n    }, []);\n\n    this.orientations = ['Horizontal', 'RotateLeft', 'RotateRight', 'Horizontal'];\n    this.horizontalAlignments = ['center', 'left', 'right'];\n    this.verticalAlignments = ['top', 'middle', 'bottom'];\n  }\n\n  clean() {\n    this.placeholders = {};\n    this.activePlaceholder = null;\n  }\n\n  resize(name, width, height) {\n    this.activatePlaceholder(name);\n    this.resizePlaceholder(this.activePlaceholder, 0, 0, width, height);\n  };\n\n  position(name, left, top, width, height) {\n    this.activatePlaceholder(name);\n    this.resizePlaceholder(this.activePlaceholder, left, top, width, height);\n  };\n\n  show(name) {\n    var placeholder = this.placeholders[name];\n    if (placeholder != null) {\n      placeholder.isVisible = true;\n    }\n  };\n\n  hide(name) {\n    var placeholder = this.placeholders[name];\n    if (placeholder != null) {\n      placeholder.isVisible = false;\n    }\n  };\n\n  resizePlaceholder(placeholder, left, top, width, height) {\n    placeholder.size = new Size(width, height);\n    placeholder.rect = new Rect(left, top, width, height);\n  };\n\n  reset(placeholderName, layerKey) {\n    const layerName = this.names[layerKey];\n    const placeholder = this.placeholders[placeholderName];\n    if (placeholder != null) {\n      const layer = placeholder.layers[layerName];\n      if (layer != null) {\n        layer.reset();\n      }\n    }\n  };\n\n  activate(placeholderName, layerKey) {\n    this.activatePlaceholder(placeholderName);\n    this.activateLayer(layerKey);\n    return this.activePlaceholder;\n  };\n\n  activatePlaceholder(name) {\n    let placeholder = this.placeholders[name];\n\n    if (placeholder === undefined) {\n      placeholder = new Placeholder(name);\n      placeholder.size = this.size;\n      placeholder.rect = new Rect(0, 0, placeholder.size.width, placeholder.size.height);\n      this.placeholders[name] = placeholder;\n    }\n\n    this.activePlaceholder = placeholder;\n  };\n\n  activateLayer(value) {\n    const name = this.names[value];\n    let layer = this.activePlaceholder.layers[name];\n\n    if (layer === undefined) {\n      layer = new Layer(name);\n      this.activePlaceholder.layers[name] = layer;\n    }\n\n    this.activePlaceholder.activeLayer = layer;\n  };\n\n  map(thisArg, placeholderName, onLayer) {\n    var result = [];\n    if (onLayer != null) {\n      const placeholder = this.placeholders[placeholderName];\n      this.names.forEach(layerKey => {\n        const layer = placeholder.layers[layerKey];\n        if (layer != null) {\n          result.push(onLayer.call(thisArg, layerKey, <React.Fragment>\n            {layer.polylines.length > 0 ? <svg height={placeholder.size.height} width={placeholder.size.width}>\n              {layer.polylines}\n            </svg> : null}\n            {layer.items}\n          </React.Fragment>));\n        }\n      });\n    }\n    return result;\n  }\n\n  text(x, y, width, height, label, orientation, horizontalAlignment, verticalAlignment, attr) {\n    this.activePlaceholder.activeLayer.items.push(\n      <div\n        key={this.activePlaceholder.activeLayer.items.length}\n        style={{\n          position: \"absolute\",\n          overflow: \"visible\",\n          fontFamily: \"Trebuchet MS, Tahoma, Verdana, Arial, sans-serif\",\n          WebkitTapHighlightColor: \"rgba(0,0,0,0)\",\n          WebkitUserSelect: \"none\",\n          WebkitTouchCallout: \"none\",\n          KhtmlUserSelect: \"none\",\n          MozUserSelect: \"none\",\n          msUserSelect: \"none\",\n          userSelect: \"none\",\n          boxSizing: \"content-box\",\n          ...attr,\n          top: y + \"px\",\n          left: x + \"px\"\n        }}\n      >\n        <RotatedText\n          width={width}\n          height={height}\n          orientation={this.orientations[orientation]}\n          horizontalAlignment={this.horizontalAlignments[horizontalAlignment]}\n          verticalAlignment={this.verticalAlignments[verticalAlignment]}\n        >{label}</RotatedText>\n      </div>\n    );\n  };\n\n  polylinesBuffer(buffer) {\n    buffer.loop(this, function (polyline) {\n      if (polyline.length() > 0) {\n        this.polyline(polyline);\n      }\n    });\n  };\n\n  polyline(polylineData) {\n    var data,\n      attr = polylineData.paletteItem.toAttr(),\n      step,\n      radius,\n      cornerRadius,\n      style = {};\n\n\n    if (attr.fillColor !== undefined) {\n      style.fill = attr.fillColor;\n      style.fillOpacity = attr.opacity;\n    }\n    else {\n      style.fillOpacity = 0;\n    }\n\n    if (attr.lineWidth !== undefined && attr.borderColor !== undefined) {\n      style.stroke = attr.borderColor;\n      style.strokeWidth = attr.lineWidth;\n\n      if (attr.opacity !== undefined) {\n        style.strokeOpacity = attr.opacity;\n      } else {\n        style.strokeOpacity = 1;\n      }\n    } else {\n      style.stroke = \"transparent\";\n      style.strokeWidth = 0;\n    }\n\n    if (attr.lineType != null) {\n      step = Math.round(attr.lineWidth) || 1;\n      switch (attr.lineType) {\n        case LineType.Dotted:\n          style.strokeDasharray = step + \",\" + step;\n          break;\n        case LineType.Dashed:\n          style.strokeDasharray = (step * 5) + \",\" + (step * 3);\n          break;\n        case LineType.Solid:\n        default:\n          style.strokeDasharray = \"\";\n          break;\n      }\n    }\n\n    data = \"\";\n    polylineData.loop(this, function (segment) {\n      switch (segment.segmentType) {\n        case SegmentType.Move:\n          data += \"M\" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y) + 0.5);\n          break;\n        case SegmentType.Line:\n          data += \"L\" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y) + 0.5);\n          break;\n        case SegmentType.QuadraticArc:\n          data += \"Q\" + (Math.round(segment.cpX) + 0.5) + \" \" + (Math.round(segment.cpY) + 0.5) + \" \" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y) + 0.5);\n          break;\n        case SegmentType.Dot:\n          // A rx, ry, x-axis-rotation, large-arc-flag, sweep-flag, x, y\n          if (segment.width === segment.height && segment.width / 2.0 <= segment.cornerRadius) {\n            // dot\n            radius = segment.width / 2.0;\n            data += \"M\" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y) + segment.height / 2.0 + 0.5);\n            data += \"A\" + radius + \" \" + radius + \" 0 0 0 \" + (Math.round(segment.x + segment.width) + 0.5) + \" \" + (Math.round(segment.y) + segment.height / 2.0 + 0.5);\n            data += \"A\" + radius + \" \" + radius + \" 0 0 0 \" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y) + segment.height / 2.0 + 0.5);\n          } else if (segment.cornerRadius === 0) {\n            // square\n            data += \"M\" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y) + 0.5);\n            data += \"L\" + (Math.round(segment.x + segment.width) + 0.5) + \" \" + (Math.round(segment.y) + 0.5);\n            data += \"L\" + (Math.round(segment.x + segment.width) + 0.5) + \" \" + (Math.round(segment.y + segment.height) + 0.5);\n            data += \"L\" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y + segment.height) + 0.5);\n            data += \"L\" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y) + 0.5);\n          } else {\n            cornerRadius = Math.min(segment.cornerRadius, Math.min(segment.width / 2.0, segment.height / 2.0));\n            data += \"M\" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y + cornerRadius) + 0.5);\n            data += \"A\" + Math.round(cornerRadius) + \" \" + Math.round(cornerRadius) + \" 0 0 1 \" + (Math.round(segment.x + cornerRadius) + 0.5) + \" \" + (Math.round(segment.y) + 0.5);\n            data += \"L\" + (Math.round(segment.x + segment.width - cornerRadius) + 0.5) + \" \" + (Math.round(segment.y) + 0.5);\n            data += \"A\" + Math.round(cornerRadius) + \" \" + Math.round(cornerRadius) + \" 0 0 1 \" + (Math.round(segment.x + segment.width) + 0.5) + \" \" + (Math.round(segment.y + cornerRadius) + 0.5);\n            data += \"L\" + (Math.round(segment.x + segment.width) + 0.5) + \" \" + (Math.round(segment.y + segment.height - cornerRadius) + 0.5);\n            data += \"A\" + Math.round(cornerRadius) + \" \" + Math.round(cornerRadius) + \" 0 0 1 \" + (Math.round(segment.x + segment.width - cornerRadius) + 0.5) + \" \" + (Math.round(segment.y + segment.height) + 0.5);\n            data += \"L\" + (Math.round(segment.x + cornerRadius) + 0.5) + \" \" + (Math.round(segment.y + segment.height) + 0.5);\n            data += \"A\" + Math.round(cornerRadius) + \" \" + Math.round(cornerRadius) + \" 0 0 1 \" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y + segment.height - cornerRadius) + 0.5);\n            data += \"L\" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y + cornerRadius) + 0.5);\n          }\n          break;\n        case SegmentType.CubicArc:\n          data += \"C\" + (Math.round(segment.cpX1) + 0.5) + \" \" + (Math.round(segment.cpY1) + 0.5) +\n            \" \" + (Math.round(segment.cpX2) + 0.5) + \" \" + (Math.round(segment.cpY2) + 0.5) +\n            \" \" + (Math.round(segment.x) + 0.5) + \" \" + (Math.round(segment.y) + 0.5);\n          break;\n        default:\n          break;\n      }\n    });\n\n    this.activePlaceholder.activeLayer.polylines.push(\n      <path key={this.activePlaceholder.activeLayer.polylines.length} d={data} style={style} />\n    );\n  };\n\n  template(x, y, width, height, contentx, contenty, contentWidth, contentHeight, template, hashCode, onRenderTemplate, uiHash, attr) { //ignore jslint\n    let style;\n\n    const left = x + contentx,\n      top = y + contenty,\n      templateWidth = contentWidth,\n      templateHeight = contentHeight;\n\n    style = {\n      \"width\": templateWidth + \"px\",\n      \"height\": templateHeight + \"px\",\n      \"top\": top + \"px\",\n      \"left\": left + \"px\",\n      \"position\": \"absolute\",\n      \"padding\": \"0px\",\n      \"margin\": \"0px\",\n      ...attr\n    };\n\n    if (uiHash == null) {\n      uiHash = {};\n    }\n\n    uiHash.x = left;\n    uiHash.y = top;\n    uiHash.width = templateWidth;\n    uiHash.height = templateHeight;\n\n    if (onRenderTemplate !== null) {\n      this.activePlaceholder.activeLayer.items.push(\n        <div\n          key={this.activePlaceholder.activeLayer.items.length}\n          style={{\n            position: \"absolute\",\n            overflow: \"visible\",\n            fontFamily: \"Trebuchet MS, Tahoma, Verdana, Arial, sans-serif\",\n            WebkitTapHighlightColor: \"rgba(0,0,0,0)\",\n            WebkitUserSelect: \"none\",\n            WebkitTouchCallout: \"none\",\n            KhtmlUserSelect: \"none\",\n            MozUserSelect: \"none\",\n            msUserSelect: \"none\",\n            userSelect: \"none\",\n            boxSizing: \"content-box\",\n            ...style\n          }}\n        >\n          {onRenderTemplate(uiHash)}\n        </div>\n      );\n    };\n  };\n\n  getPxSize(value, base) {\n    var result = value;\n    if (typeof value === \"string\") {\n      if (value.indexOf(\"pt\") > 0) {\n        result = parseInt(value, 10) * 96 / 72;\n      }\n      else if (value.indexOf(\"%\") > 0) {\n        result = parseFloat(value) / 100.0 * base;\n      }\n      else {\n        result = parseInt(value, 10);\n      }\n    }\n    return result;\n  };\n};\n\nexport default Graphics;"]},"metadata":{},"sourceType":"module"}