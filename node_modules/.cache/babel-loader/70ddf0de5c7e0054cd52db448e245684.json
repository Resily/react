{"ast":null,"code":"/*\n  jsonml-html.js\n  JsonML to HTML utility\n\n  Created: 2006-11-09-0116\n  Modified: 2012-11-24-1051\n\n  Copyright (c)2006-2012 Stephen M. McKamey\n  Distributed under The MIT License: http://jsonml.org/license\n\n  This file ensures a global JsonML object adding these methods:\n\n    JsonML.toHTML(JsonML, filter)\n\n      This method produces a tree of DOM elements from a JsonML tree. The\n      array must not contain any cyclical references.\n\n      The optional filter parameter is a function which can filter and\n      transform the results. It receives each of the DOM nodes, and\n      its return value is used instead of the original value. If it\n      returns what it received, then structure is not modified. If it\n      returns undefined then the member is deleted.\n\n      This is useful for binding unobtrusive JavaScript to the generated\n      DOM elements.\n\n      Example:\n\n      // Parses the structure. If an element has a specific CSS value then\n      // takes appropriate action: Remove from results, add special event\n      // handlers, or bind to a custom component.\n\n      var myUI = JsonML.toHTML(myUITemplate, function (elem) {\n        if (elem.className.indexOf('Remove-Me') >= 0) {\n          // this will remove from resulting DOM tree\n          return null;\n        }\n\n        if (elem.tagName && elem.tagName.toLowerCase() === 'a' &&\n          elem.className.indexOf('External-Link') >= 0) {\n          // this is the equivalent of target='_blank'\n          elem.onclick = function(evt) {\n            window.open(elem.href); return false;\n          };\n\n        } else if (elem.className.indexOf('Fancy-Widgit') >= 0) {\n          // bind to a custom component\n          FancyWidgit.bindDOM(elem);\n        }\n        return elem;\n      });\n\n    JsonML.toHTMLText(JsonML)\n      Converts JsonML to HTML text\n\n    // Implement onerror to handle any runtime errors while binding:\n    JsonML.onerror = function (ex, jml, filter) {\n      // display inline error message\n      return document.createTextNode('['+ex+']');\n    };\n*/\nvar JsonML = {};\n\nif (typeof document !== 'undefined') {\n  (function (JsonML, document) {\n    'use strict';\n    /**\n     * Attribute name map\n     * \n     * @private\n     * @constant\n     * @type {Object.<string>}\n     */\n\n    var ATTR_MAP = {\n      'accesskey': 'accessKey',\n      'bgcolor': 'bgColor',\n      'cellpadding': 'cellPadding',\n      'cellspacing': 'cellSpacing',\n      'checked': 'defaultChecked',\n      'class': 'className',\n      'colspan': 'colSpan',\n      'contenteditable': 'contentEditable',\n      'defaultchecked': 'defaultChecked',\n      'for': 'htmlFor',\n      'formnovalidate': 'formNoValidate',\n      'hidefocus': 'hideFocus',\n      'ismap': 'isMap',\n      'maxlength': 'maxLength',\n      'novalidate': 'noValidate',\n      'readonly': 'readOnly',\n      'rowspan': 'rowSpan',\n      'spellcheck': 'spellCheck',\n      'tabindex': 'tabIndex',\n      'usemap': 'useMap',\n      'willvalidate': 'willValidate' // can add more attributes here as needed\n\n    };\n    /**\n     * Attribute duplicates map\n     * \n     * @private\n     * @constant\n     * @type {Object.<string>}\n     */\n\n    var ATTR_DUP = {\n      'enctype': 'encoding',\n      'onscroll': 'DOMMouseScroll' // can add more attributes here as needed\n\n    };\n    /**\n     * Attributes to be set via DOM\n     * \n     * @private\n     * @constant\n     * @type {Object.<number>}\n     */\n\n    var ATTR_DOM = {\n      'autocapitalize': 1,\n      'autocomplete': 1,\n      'autocorrect': 1 // can add more attributes here as needed\n\n    };\n    /**\n     * Boolean attribute map\n     * \n     * @private\n     * @constant\n     * @type {Object.<number>}\n     */\n\n    var ATTR_BOOL = {\n      'async': 1,\n      'autofocus': 1,\n      'checked': 1,\n      'defaultchecked': 1,\n      'defer': 1,\n      'disabled': 1,\n      'formnovalidate': 1,\n      'hidden': 1,\n      'indeterminate': 1,\n      'ismap': 1,\n      'multiple': 1,\n      'novalidate': 1,\n      'readonly': 1,\n      'required': 1,\n      'spellcheck': 1,\n      'willvalidate': 1 // can add more attributes here as needed\n\n    };\n    /**\n     * Leading SGML line ending pattern\n     * \n     * @private\n     * @constant\n     * @type {RegExp}\n     */\n\n    var LEADING = /^[\\r\\n]+/;\n    /**\n     * Trailing SGML line ending pattern\n     * \n     * @private\n     * @constant\n     * @type {RegExp}\n     */\n\n    var TRAILING = /[\\r\\n]+$/;\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n\n    var NUL = 0;\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n\n    var FUN = 1;\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n\n    var ARY = 2;\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n\n    var OBJ = 3;\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n\n    var VAL = 4;\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n\n    var RAW = 5;\n    /**\n     * Wraps a data value to maintain as raw markup in output\n     * \n     * @private\n     * @this {Markup}\n     * @param {string} value The value\n     * @constructor\n     */\n\n    function Markup(value) {\n      /**\n       * @type {string}\n       * @const\n       * @protected\n       */\n      this.value = value;\n    }\n    /**\n     * Renders the value\n     * \n     * @public\n     * @ignore\n     * @override\n     * @this {Markup}\n     * @return {string} value\n     */\n\n\n    Markup.prototype.toString = function () {\n      return this.value;\n    };\n    /**\n     * @ignore\n     * @param {string} value\n     * @return {Markup}\n     */\n\n\n    JsonML.raw = function (value) {\n      return new Markup(value);\n    };\n    /**\n     * @ignore\n     * @param {*} value\n     * @return {boolean}\n     */\n\n\n    var isMarkup = JsonML.isRaw = function (value) {\n      return value instanceof Markup;\n    };\n    /**\n     * Determines if the value is an Array\n     * \n     * @private\n     * @param {*} val the object being tested\n     * @return {boolean}\n     */\n\n\n    var isArray = Array.isArray || function (val) {\n      return val instanceof Array;\n    };\n    /**\n     * Determines if the value is a function\n     * \n     * @private\n     * @param {*} val the object being tested\n     * @return {boolean}\n     */\n\n\n    function isFunction(val) {\n      return typeof val === 'function';\n    }\n    /**\n     * Determines the type of the value\n     * \n     * @private\n     * @param {*} val the object being tested\n     * @return {number}\n     */\n\n\n    function getType(val) {\n      switch (typeof val) {\n        case 'object':\n          return !val ? NUL : isArray(val) ? ARY : isMarkup(val) ? RAW : val instanceof Date ? VAL : OBJ;\n\n        case 'function':\n          return FUN;\n\n        case 'undefined':\n          return NUL;\n\n        default:\n          return VAL;\n      }\n    }\n    /**\n     * Creates a DOM element \n     * \n     * @private\n     * @param {string} tag The element's tag name\n     * @return {Node}\n     */\n\n\n    var createElement = function createElement(tag) {\n      if (!tag) {\n        // create a document fragment to hold multiple-root elements\n        if (document.createDocumentFragment) {\n          return document.createDocumentFragment();\n        }\n\n        tag = '';\n      } else if (tag.charAt(0) === '!') {\n        return document.createComment(tag === '!' ? '' : tag.substr(1) + ' ');\n      }\n\n      if (tag.toLowerCase() === 'style' && document.createStyleSheet) {\n        // IE requires this interface for styles\n        return document.createStyleSheet();\n      }\n\n      return document.createElement(tag);\n    };\n    /**\n     * Adds an event handler to an element\n     * \n     * @private\n     * @param {Node} elem The element\n     * @param {string} name The event name\n     * @param {function(Event)} handler The event handler\n     */\n\n\n    var addHandler = function addHandler(elem, name, handler) {\n      if (name.substr(0, 2) === 'on') {\n        name = name.substr(2);\n      }\n\n      switch (typeof handler) {\n        case 'function':\n          if (elem.addEventListener) {\n            // DOM Level 2\n            elem.addEventListener(name, handler, false);\n          } else if (elem.attachEvent && getType(elem[name]) !== NUL) {\n            // IE legacy events\n            elem.attachEvent('on' + name, handler);\n          } else {\n            // DOM Level 0\n            var old = elem['on' + name] || elem[name];\n            elem['on' + name] = elem[name] = !isFunction(old) ? handler : function (e) {\n              return old.call(this, e) !== false && handler.call(this, e) !== false;\n            };\n          }\n\n          break;\n\n        case 'string':\n          // inline functions are DOM Level 0\n\n          /*jslint evil:true */\n          elem['on' + name] = new Function('event', handler);\n          /*jslint evil:false */\n\n          break;\n      }\n    };\n    /**\n     * Apply styles to element\n     * \n     * @public\n     * @ignore\n     * @param {Node} elem The element\n     * @param {Object} css styles object\n     * @return {Node}\n     */\n\n\n    var applyStyles = JsonML.applyStyles = function (elem, css) {\n      for (var key in css) {\n        if (css.hasOwnProperty(key)) {\n          elem.style[key] = css[key];\n        }\n      }\n\n      return elem;\n    };\n    /**\n     * Appends an attribute to an element\n     * \n     * @private\n     * @param {Node} elem The element\n     * @param {Object} attr Attributes object\n     * @return {Node}\n     */\n\n\n    var addAttributes = function addAttributes(elem, attr) {\n      if (attr.name && document.attachEvent && !elem.parentNode) {\n        try {\n          // IE fix for not being able to programatically change the name attribute\n          var alt = createElement('<' + elem.tagName + ' name=\"' + attr.name + '\">'); // fix for Opera 8.5 and Netscape 7.1 creating malformed elements\n\n          if (elem.tagName === alt.tagName) {\n            elem = alt;\n          }\n        } catch (ex) {}\n      } // for each attributeName\n\n\n      for (var name in attr) {\n        if (attr.hasOwnProperty(name)) {\n          // attributeValue\n          var value = attr[name],\n              type = getType(value);\n\n          if (name) {\n            if (type === NUL) {\n              value = '';\n              type = VAL;\n            }\n\n            name = ATTR_MAP[name.toLowerCase()] || name;\n\n            if (name === '$') {\n              value(elem);\n            } else if (name == 'className') {\n              if (isArray(value)) {\n                for (var index = 0; index < value.length; index += 1) {\n                  elem.className += \" \" + value[index];\n                }\n              } else {\n                elem.className += \" \" + value;\n              }\n            } else if (name === 'style') {\n              if (getType(elem.style.cssText) !== NUL) {\n                if (typeof value == \"string\") {\n                  elem.style.cssText = value;\n                } else {\n                  applyStyles(elem, value);\n                }\n              } else {\n                elem.style = value;\n              }\n            } else if (name.substr(0, 2) === 'on') {\n              addHandler(elem, name, value); // also set duplicated events\n\n              name = ATTR_DUP[name];\n\n              if (name) {\n                addHandler(elem, name, value);\n              }\n            } else if (!ATTR_DOM[name.toLowerCase()] && (type !== VAL || name.charAt(0) === '$' || getType(elem[name]) !== NUL || getType(elem[ATTR_DUP[name]]) !== NUL)) {\n              // direct setting of existing properties\n              elem[name] = value; // also set duplicated properties\n\n              name = ATTR_DUP[name];\n\n              if (name) {\n                elem[name] = value;\n              }\n            } else if (ATTR_BOOL[name.toLowerCase()]) {\n              if (value) {\n                // boolean attributes\n                elem.setAttribute(name, name); // also set duplicated attributes\n\n                name = ATTR_DUP[name];\n\n                if (name) {\n                  elem.setAttribute(name, name);\n                }\n              }\n            } else {\n              // http://www.quirksmode.org/dom/w3c_core.html#attributes\n              // custom and 'data-*' attributes\n              elem.setAttribute(name, value); // also set duplicated attributes\n\n              name = ATTR_DUP[name];\n\n              if (name) {\n                elem.setAttribute(name, value);\n              }\n            }\n          }\n        }\n      }\n\n      return elem;\n    };\n    /**\n     * Appends a child to an element\n     * \n     * @private\n     * @param {Node} elem The parent element\n     * @param {Node} child The child\n     */\n\n\n    var appendDOM = JsonML.appendDOM = function (elem, child) {\n      if (child) {\n        var tag = (elem.tagName || '').toLowerCase();\n\n        if (elem.nodeType === 8) {\n          // comment\n          if (child.nodeType === 3) {\n            // text node\n            elem.nodeValue += child.nodeValue;\n          }\n        } else if (tag === 'table' && elem.tBodies) {\n          if (!child.tagName) {\n            // must unwrap documentFragment for tables\n            if (child.nodeType === 11) {\n              while (child.firstChild) {\n                appendDOM(elem, child.removeChild(child.firstChild));\n              }\n            }\n\n            return;\n          } // in IE must explicitly nest TRs in TBODY\n\n\n          var childTag = child.tagName.toLowerCase(); // child tagName\n\n          if (childTag && childTag !== 'tbody' && childTag !== 'thead') {\n            // insert in last tbody\n            var tBody = elem.tBodies.length > 0 ? elem.tBodies[elem.tBodies.length - 1] : null;\n\n            if (!tBody) {\n              tBody = createElement(childTag === 'th' ? 'thead' : 'tbody');\n              elem.appendChild(tBody);\n            }\n\n            tBody.appendChild(child);\n          } else if (elem.canHaveChildren !== false) {\n            elem.appendChild(child);\n          }\n        } else if (tag === 'style' && document.createStyleSheet) {\n          // IE requires this interface for styles\n          elem.cssText = child;\n        } else if (elem.canHaveChildren !== false) {\n          elem.appendChild(child);\n        } else if (tag === 'object' && child.tagName && child.tagName.toLowerCase() === 'param') {\n          // IE-only path\n          try {\n            elem.appendChild(child);\n          } catch (ex1) {}\n\n          try {\n            if (elem.object) {\n              elem.object[child.name] = child.value;\n            }\n          } catch (ex2) {}\n        }\n      }\n    };\n    /**\n     * Tests a node for whitespace\n     * \n     * @private\n     * @param {Node} node The node\n     * @return {boolean}\n     */\n\n\n    var isWhitespace = function isWhitespace(node) {\n      return !!node && node.nodeType === 3 && (!node.nodeValue || !/\\S/.exec(node.nodeValue));\n    };\n    /**\n     * Trims whitespace pattern from the text node\n     * \n     * @private\n     * @param {Node} node The node\n     */\n\n\n    var trimPattern = function trimPattern(node, pattern) {\n      if (!!node && node.nodeType === 3 && pattern.exec(node.nodeValue)) {\n        node.nodeValue = node.nodeValue.replace(pattern, '');\n      }\n    };\n    /**\n     * Removes leading and trailing whitespace nodes\n     * \n     * @private\n     * @param {Node} elem The node\n     */\n\n\n    var trimWhitespace = function trimWhitespace(elem) {\n      if (elem) {\n        while (isWhitespace(elem.firstChild)) {\n          // trim leading whitespace text nodes\n          elem.removeChild(elem.firstChild);\n        } // trim leading whitespace text\n\n\n        trimPattern(elem.firstChild, LEADING);\n\n        while (isWhitespace(elem.lastChild)) {\n          // trim trailing whitespace text nodes\n          elem.removeChild(elem.lastChild);\n        } // trim trailing whitespace text\n\n\n        trimPattern(elem.lastChild, TRAILING);\n      }\n    };\n    /**\n     * Converts the markup to DOM nodes\n     * \n     * @private\n     * @param {string|Markup} value The node\n     * @return {Node}\n     */\n\n\n    var toDOM = function toDOM(value) {\n      var wrapper = createElement('div');\n      wrapper.innerHTML = '' + value; // trim extraneous whitespace\n\n      trimWhitespace(wrapper); // eliminate wrapper for single nodes\n\n      if (wrapper.childNodes.length === 1) {\n        return wrapper.firstChild;\n      } // create a document fragment to hold elements\n\n\n      var frag = createElement('');\n\n      while (wrapper.firstChild) {\n        frag.appendChild(wrapper.firstChild);\n      }\n\n      return frag;\n    };\n    /**\n     * Default error handler\n     * @ignore\n     * @param {Error} ex\n     * @return {Node}\n     */\n\n\n    var onError = function onError(ex) {\n      return document.createTextNode('[' + ex + ']');\n    };\n    /* override this to perform custom error handling during binding */\n\n\n    JsonML.onerror = null;\n    /**\n     * also used by JsonML.BST\n     * @ignore\n     * @param {Node} elem\n     * @param {*} jml\n     * @param {function} filter\n     * @return {Node}\n     */\n\n    var patch = JsonML.patch = function (elem, jml, filter) {\n      for (var i = 1; i < jml.length; i += 1) {\n        if (isArray(jml[i]) || 'string' === typeof jml[i]) {\n          // append children\n          appendDOM(elem, toHTML(jml[i], filter));\n        } else if (isMarkup(jml[i])) {\n          appendDOM(elem, toDOM(jml[i].value));\n        } else if ('object' === typeof jml[i] && jml[i] !== null && elem.nodeType === 1) {\n          // add attributes\n          elem = addAttributes(elem, jml[i]);\n        }\n      }\n\n      return elem;\n    };\n    /**\n     * Main builder entry point\n     * @ignore\n     * @param {string|array} jml\n     * @param {function} filter\n     * @return {Node}\n     */\n\n\n    var toHTML = JsonML.toHTML = function (jml, filter) {\n      try {\n        if (!jml) {\n          return null;\n        }\n\n        if ('string' === typeof jml) {\n          return document.createTextNode(jml);\n        }\n\n        if (isMarkup(jml)) {\n          return toDOM(jml.value);\n        }\n\n        if (!isArray(jml) || 'string' !== typeof jml[0]) {\n          throw new SyntaxError('invalid JsonML');\n        }\n\n        var tagName = jml[0]; // tagName\n\n        if (!tagName) {\n          // correctly handle a list of JsonML trees\n          // create a document fragment to hold elements\n          var frag = createElement('');\n\n          for (var i = 1; i < jml.length; i += 1) {\n            appendDOM(frag, toHTML(jml[i], filter));\n          } // trim extraneous whitespace\n\n\n          trimWhitespace(frag); // eliminate wrapper for single nodes\n\n          if (frag.childNodes.length === 1) {\n            return frag.firstChild;\n          }\n\n          return frag;\n        }\n\n        if (tagName.toLowerCase() === 'style' && document.createStyleSheet) {\n          // IE requires this interface for styles\n          patch(document.createStyleSheet(), jml, filter); // in IE styles are effective immediately\n\n          return null;\n        }\n\n        var elem = patch(createElement(tagName), jml, filter); // trim extraneous whitespace\n\n        trimWhitespace(elem);\n        return elem && isFunction(filter) ? filter(elem) : elem;\n      } catch (ex) {\n        try {\n          // handle error with complete context\n          var err = isFunction(JsonML.onerror) ? JsonML.onerror : onError;\n          return err(ex, jml, filter);\n        } catch (ex2) {\n          return document.createTextNode('[' + ex2 + ']');\n        }\n      }\n    };\n    /**\n     * Not super efficient.\n     * TODO: port render.js from DUEL\n     * @ignore\n     * @param {string|array} jml JsonML structure\n     * @return {string} HTML text\n     */\n\n\n    JsonML.toHTMLText = function (jml, filter) {\n      var elem = toHTML(jml, filter);\n\n      if (elem.outerHTML) {\n        return elem.outerHTML;\n      }\n\n      var parent = createElement('div');\n      parent.appendChild(elem);\n      var html = parent.innerHTML;\n      parent.removeChild(elem);\n      return html;\n    };\n  })(JsonML, document);\n}\n\nexport default JsonML;","map":{"version":3,"sources":["/Users/01005901/go/src/github.com/Resily/react/node_modules/basicprimitives/src/common/jsonml-html.js"],"names":["JsonML","document","ATTR_MAP","ATTR_DUP","ATTR_DOM","ATTR_BOOL","LEADING","TRAILING","NUL","FUN","ARY","OBJ","VAL","RAW","Markup","value","prototype","toString","raw","isMarkup","isRaw","isArray","Array","val","isFunction","getType","Date","createElement","tag","createDocumentFragment","charAt","createComment","substr","toLowerCase","createStyleSheet","addHandler","elem","name","handler","addEventListener","attachEvent","old","e","call","Function","applyStyles","css","key","hasOwnProperty","style","addAttributes","attr","parentNode","alt","tagName","ex","type","index","length","className","cssText","setAttribute","appendDOM","child","nodeType","nodeValue","tBodies","firstChild","removeChild","childTag","tBody","appendChild","canHaveChildren","ex1","object","ex2","isWhitespace","node","exec","trimPattern","pattern","replace","trimWhitespace","lastChild","toDOM","wrapper","innerHTML","childNodes","frag","onError","createTextNode","onerror","patch","jml","filter","i","toHTML","SyntaxError","err","toHTMLText","outerHTML","parent","html"],"mappings":"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","sourcesContent":["/*\n  jsonml-html.js\n  JsonML to HTML utility\n\n  Created: 2006-11-09-0116\n  Modified: 2012-11-24-1051\n\n  Copyright (c)2006-2012 Stephen M. McKamey\n  Distributed under The MIT License: http://jsonml.org/license\n\n  This file ensures a global JsonML object adding these methods:\n\n    JsonML.toHTML(JsonML, filter)\n\n      This method produces a tree of DOM elements from a JsonML tree. The\n      array must not contain any cyclical references.\n\n      The optional filter parameter is a function which can filter and\n      transform the results. It receives each of the DOM nodes, and\n      its return value is used instead of the original value. If it\n      returns what it received, then structure is not modified. If it\n      returns undefined then the member is deleted.\n\n      This is useful for binding unobtrusive JavaScript to the generated\n      DOM elements.\n\n      Example:\n\n      // Parses the structure. If an element has a specific CSS value then\n      // takes appropriate action: Remove from results, add special event\n      // handlers, or bind to a custom component.\n\n      var myUI = JsonML.toHTML(myUITemplate, function (elem) {\n        if (elem.className.indexOf('Remove-Me') >= 0) {\n          // this will remove from resulting DOM tree\n          return null;\n        }\n\n        if (elem.tagName && elem.tagName.toLowerCase() === 'a' &&\n          elem.className.indexOf('External-Link') >= 0) {\n          // this is the equivalent of target='_blank'\n          elem.onclick = function(evt) {\n            window.open(elem.href); return false;\n          };\n\n        } else if (elem.className.indexOf('Fancy-Widgit') >= 0) {\n          // bind to a custom component\n          FancyWidgit.bindDOM(elem);\n        }\n        return elem;\n      });\n\n    JsonML.toHTMLText(JsonML)\n      Converts JsonML to HTML text\n\n    // Implement onerror to handle any runtime errors while binding:\n    JsonML.onerror = function (ex, jml, filter) {\n      // display inline error message\n      return document.createTextNode('['+ex+']');\n    };\n*/\n\nconst JsonML = {};\n\nif (typeof document !== 'undefined') {\n\n  (function (JsonML, document) {\n    'use strict';\n\n    /**\n     * Attribute name map\n     * \n     * @private\n     * @constant\n     * @type {Object.<string>}\n     */\n    var ATTR_MAP = {\n      'accesskey': 'accessKey',\n      'bgcolor': 'bgColor',\n      'cellpadding': 'cellPadding',\n      'cellspacing': 'cellSpacing',\n      'checked': 'defaultChecked',\n      'class': 'className',\n      'colspan': 'colSpan',\n      'contenteditable': 'contentEditable',\n      'defaultchecked': 'defaultChecked',\n      'for': 'htmlFor',\n      'formnovalidate': 'formNoValidate',\n      'hidefocus': 'hideFocus',\n      'ismap': 'isMap',\n      'maxlength': 'maxLength',\n      'novalidate': 'noValidate',\n      'readonly': 'readOnly',\n      'rowspan': 'rowSpan',\n      'spellcheck': 'spellCheck',\n      'tabindex': 'tabIndex',\n      'usemap': 'useMap',\n      'willvalidate': 'willValidate'\n      // can add more attributes here as needed\n    };\n\n    /**\n     * Attribute duplicates map\n     * \n     * @private\n     * @constant\n     * @type {Object.<string>}\n     */\n    var ATTR_DUP = {\n      'enctype': 'encoding',\n      'onscroll': 'DOMMouseScroll'\n      // can add more attributes here as needed\n    };\n\n    /**\n     * Attributes to be set via DOM\n     * \n     * @private\n     * @constant\n     * @type {Object.<number>}\n     */\n    var ATTR_DOM = {\n      'autocapitalize': 1,\n      'autocomplete': 1,\n      'autocorrect': 1\n      // can add more attributes here as needed\n    };\n\n    /**\n     * Boolean attribute map\n     * \n     * @private\n     * @constant\n     * @type {Object.<number>}\n     */\n    var ATTR_BOOL = {\n      'async': 1,\n      'autofocus': 1,\n      'checked': 1,\n      'defaultchecked': 1,\n      'defer': 1,\n      'disabled': 1,\n      'formnovalidate': 1,\n      'hidden': 1,\n      'indeterminate': 1,\n      'ismap': 1,\n      'multiple': 1,\n      'novalidate': 1,\n      'readonly': 1,\n      'required': 1,\n      'spellcheck': 1,\n      'willvalidate': 1\n      // can add more attributes here as needed\n    };\n\n    /**\n     * Leading SGML line ending pattern\n     * \n     * @private\n     * @constant\n     * @type {RegExp}\n     */\n    var LEADING = /^[\\r\\n]+/;\n\n    /**\n     * Trailing SGML line ending pattern\n     * \n     * @private\n     * @constant\n     * @type {RegExp}\n     */\n    var TRAILING = /[\\r\\n]+$/;\n\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n    var NUL = 0;\n\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n    var FUN = 1;\n\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n    var ARY = 2;\n\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n    var OBJ = 3;\n\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n    var VAL = 4;\n\n    /**\n     * @private\n     * @const\n     * @type {number}\n     */\n    var RAW = 5;\n\n    /**\n     * Wraps a data value to maintain as raw markup in output\n     * \n     * @private\n     * @this {Markup}\n     * @param {string} value The value\n     * @constructor\n     */\n    function Markup(value) {\n      /**\n       * @type {string}\n       * @const\n       * @protected\n       */\n      this.value = value;\n    }\n\n    /**\n     * Renders the value\n     * \n     * @public\n     * @ignore\n     * @override\n     * @this {Markup}\n     * @return {string} value\n     */\n    Markup.prototype.toString = function () {\n      return this.value;\n    };\n\n    /**\n     * @ignore\n     * @param {string} value\n     * @return {Markup}\n     */\n    JsonML.raw = function (value) {\n      return new Markup(value);\n    };\n\n    /**\n     * @ignore\n     * @param {*} value\n     * @return {boolean}\n     */\n    var isMarkup = JsonML.isRaw = function (value) {\n      return (value instanceof Markup);\n    };\n\n    /**\n     * Determines if the value is an Array\n     * \n     * @private\n     * @param {*} val the object being tested\n     * @return {boolean}\n     */\n    var isArray = Array.isArray || function (val) {\n      return (val instanceof Array);\n    };\n\n    /**\n     * Determines if the value is a function\n     * \n     * @private\n     * @param {*} val the object being tested\n     * @return {boolean}\n     */\n    function isFunction(val) {\n      return (typeof val === 'function');\n    }\n\n    /**\n     * Determines the type of the value\n     * \n     * @private\n     * @param {*} val the object being tested\n     * @return {number}\n     */\n    function getType(val) {\n      switch (typeof val) {\n        case 'object':\n          return !val ? NUL : (isArray(val) ? ARY : (isMarkup(val) ? RAW : ((val instanceof Date) ? VAL : OBJ)));\n        case 'function':\n          return FUN;\n        case 'undefined':\n          return NUL;\n        default:\n          return VAL;\n      }\n    }\n\n    /**\n     * Creates a DOM element \n     * \n     * @private\n     * @param {string} tag The element's tag name\n     * @return {Node}\n     */\n    var createElement = function (tag) {\n      if (!tag) {\n        // create a document fragment to hold multiple-root elements\n        if (document.createDocumentFragment) {\n          return document.createDocumentFragment();\n        }\n\n        tag = '';\n\n      } else if (tag.charAt(0) === '!') {\n        return document.createComment(tag === '!' ? '' : tag.substr(1) + ' ');\n      }\n\n      if (tag.toLowerCase() === 'style' && document.createStyleSheet) {\n        // IE requires this interface for styles\n        return document.createStyleSheet();\n      }\n\n      return document.createElement(tag);\n    };\n\n    /**\n     * Adds an event handler to an element\n     * \n     * @private\n     * @param {Node} elem The element\n     * @param {string} name The event name\n     * @param {function(Event)} handler The event handler\n     */\n    var addHandler = function (elem, name, handler) {\n      if (name.substr(0, 2) === 'on') {\n        name = name.substr(2);\n      }\n\n      switch (typeof handler) {\n        case 'function':\n          if (elem.addEventListener) {\n            // DOM Level 2\n            elem.addEventListener(name, handler, false);\n\n          } else if (elem.attachEvent && getType(elem[name]) !== NUL) {\n            // IE legacy events\n            elem.attachEvent('on' + name, handler);\n\n          } else {\n            // DOM Level 0\n            var old = elem['on' + name] || elem[name];\n            elem['on' + name] = elem[name] = !isFunction(old) ? handler :\n              function (e) {\n                return (old.call(this, e) !== false) && (handler.call(this, e) !== false);\n              };\n          }\n          break;\n\n        case 'string':\n          // inline functions are DOM Level 0\n          /*jslint evil:true */\n          elem['on' + name] = new Function('event', handler);\n          /*jslint evil:false */\n          break;\n      }\n    };\n\n    /**\n     * Apply styles to element\n     * \n     * @public\n     * @ignore\n     * @param {Node} elem The element\n     * @param {Object} css styles object\n     * @return {Node}\n     */\n    var applyStyles = JsonML.applyStyles = function (elem, css) {\n      for (var key in css) {\n        if (css.hasOwnProperty(key)) {\n          elem.style[key] = css[key];\n        }\n      }\n      return elem;\n    };\n\n    /**\n     * Appends an attribute to an element\n     * \n     * @private\n     * @param {Node} elem The element\n     * @param {Object} attr Attributes object\n     * @return {Node}\n     */\n    var addAttributes = function (elem, attr) {\n      if (attr.name && document.attachEvent && !elem.parentNode) {\n        try {\n          // IE fix for not being able to programatically change the name attribute\n          var alt = createElement('<' + elem.tagName + ' name=\"' + attr.name + '\">');\n          // fix for Opera 8.5 and Netscape 7.1 creating malformed elements\n          if (elem.tagName === alt.tagName) {\n            elem = alt;\n          }\n        } catch (ex) { }\n      }\n\n      // for each attributeName\n      for (var name in attr) {\n        if (attr.hasOwnProperty(name)) {\n          // attributeValue\n          var value = attr[name],\n            type = getType(value);\n\n          if (name) {\n            if (type === NUL) {\n              value = '';\n              type = VAL;\n            }\n\n            name = ATTR_MAP[name.toLowerCase()] || name;\n\n            if (name === '$') {\n              value(elem);\n            }\n            else if (name == 'className') {\n              if (isArray(value)) {\n                for (var index = 0; index < value.length; index += 1) {\n                  elem.className += \" \" + value[index];\n                }\n              } else {\n                elem.className += \" \" + value;\n              }\n            }\n            else if (name === 'style') {\n              if (getType(elem.style.cssText) !== NUL) {\n                if (typeof value == \"string\") {\n                  elem.style.cssText = value;\n                } else {\n                  applyStyles(elem, value);\n                }\n              } else {\n                elem.style = value;\n              }\n\n            } else if (name.substr(0, 2) === 'on') {\n              addHandler(elem, name, value);\n\n              // also set duplicated events\n              name = ATTR_DUP[name];\n              if (name) {\n                addHandler(elem, name, value);\n              }\n\n            } else if (!ATTR_DOM[name.toLowerCase()] && (type !== VAL || name.charAt(0) === '$' || getType(elem[name]) !== NUL || getType(elem[ATTR_DUP[name]]) !== NUL)) {\n              // direct setting of existing properties\n              elem[name] = value;\n\n              // also set duplicated properties\n              name = ATTR_DUP[name];\n              if (name) {\n                elem[name] = value;\n              }\n\n            } else if (ATTR_BOOL[name.toLowerCase()]) {\n              if (value) {\n                // boolean attributes\n                elem.setAttribute(name, name);\n\n                // also set duplicated attributes\n                name = ATTR_DUP[name];\n                if (name) {\n                  elem.setAttribute(name, name);\n                }\n              }\n\n            } else {\n              // http://www.quirksmode.org/dom/w3c_core.html#attributes\n\n              // custom and 'data-*' attributes\n              elem.setAttribute(name, value);\n\n              // also set duplicated attributes\n              name = ATTR_DUP[name];\n              if (name) {\n                elem.setAttribute(name, value);\n              }\n            }\n          }\n        }\n      }\n      return elem;\n    };\n\n    /**\n     * Appends a child to an element\n     * \n     * @private\n     * @param {Node} elem The parent element\n     * @param {Node} child The child\n     */\n    var appendDOM = JsonML.appendDOM = function (elem, child) {\n      if (child) {\n        var tag = (elem.tagName || '').toLowerCase();\n        if (elem.nodeType === 8) { // comment\n          if (child.nodeType === 3) { // text node\n            elem.nodeValue += child.nodeValue;\n          }\n        } else if (tag === 'table' && elem.tBodies) {\n          if (!child.tagName) {\n            // must unwrap documentFragment for tables\n            if (child.nodeType === 11) {\n              while (child.firstChild) {\n                appendDOM(elem, child.removeChild(child.firstChild));\n              }\n            }\n            return;\n          }\n\n          // in IE must explicitly nest TRs in TBODY\n          var childTag = child.tagName.toLowerCase();// child tagName\n          if (childTag && childTag !== 'tbody' && childTag !== 'thead') {\n            // insert in last tbody\n            var tBody = elem.tBodies.length > 0 ? elem.tBodies[elem.tBodies.length - 1] : null;\n            if (!tBody) {\n              tBody = createElement(childTag === 'th' ? 'thead' : 'tbody');\n              elem.appendChild(tBody);\n            }\n            tBody.appendChild(child);\n          } else if (elem.canHaveChildren !== false) {\n            elem.appendChild(child);\n          }\n\n        } else if (tag === 'style' && document.createStyleSheet) {\n          // IE requires this interface for styles\n          elem.cssText = child;\n\n        } else if (elem.canHaveChildren !== false) {\n          elem.appendChild(child);\n\n        } else if (tag === 'object' &&\n          child.tagName && child.tagName.toLowerCase() === 'param') {\n          // IE-only path\n          try {\n            elem.appendChild(child);\n          } catch (ex1) { }\n          try {\n            if (elem.object) {\n              elem.object[child.name] = child.value;\n            }\n          } catch (ex2) { }\n        }\n      }\n    };\n\n    /**\n     * Tests a node for whitespace\n     * \n     * @private\n     * @param {Node} node The node\n     * @return {boolean}\n     */\n    var isWhitespace = function (node) {\n      return !!node && (node.nodeType === 3) && (!node.nodeValue || !/\\S/.exec(node.nodeValue));\n    };\n\n    /**\n     * Trims whitespace pattern from the text node\n     * \n     * @private\n     * @param {Node} node The node\n     */\n    var trimPattern = function (node, pattern) {\n      if (!!node && (node.nodeType === 3) && pattern.exec(node.nodeValue)) {\n        node.nodeValue = node.nodeValue.replace(pattern, '');\n      }\n    };\n\n    /**\n     * Removes leading and trailing whitespace nodes\n     * \n     * @private\n     * @param {Node} elem The node\n     */\n    var trimWhitespace = function (elem) {\n      if (elem) {\n        while (isWhitespace(elem.firstChild)) {\n          // trim leading whitespace text nodes\n          elem.removeChild(elem.firstChild);\n        }\n        // trim leading whitespace text\n        trimPattern(elem.firstChild, LEADING);\n        while (isWhitespace(elem.lastChild)) {\n          // trim trailing whitespace text nodes\n          elem.removeChild(elem.lastChild);\n        }\n        // trim trailing whitespace text\n        trimPattern(elem.lastChild, TRAILING);\n      }\n    };\n\n    /**\n     * Converts the markup to DOM nodes\n     * \n     * @private\n     * @param {string|Markup} value The node\n     * @return {Node}\n     */\n    var toDOM = function (value) {\n      var wrapper = createElement('div');\n      wrapper.innerHTML = '' + value;\n\n      // trim extraneous whitespace\n      trimWhitespace(wrapper);\n\n      // eliminate wrapper for single nodes\n      if (wrapper.childNodes.length === 1) {\n        return wrapper.firstChild;\n      }\n\n      // create a document fragment to hold elements\n      var frag = createElement('');\n      while (wrapper.firstChild) {\n        frag.appendChild(wrapper.firstChild);\n      }\n      return frag;\n    };\n\n    /**\n     * Default error handler\n     * @ignore\n     * @param {Error} ex\n     * @return {Node}\n     */\n    var onError = function (ex) {\n      return document.createTextNode('[' + ex + ']');\n    };\n\n    /* override this to perform custom error handling during binding */\n    JsonML.onerror = null;\n\n    /**\n     * also used by JsonML.BST\n     * @ignore\n     * @param {Node} elem\n     * @param {*} jml\n     * @param {function} filter\n     * @return {Node}\n     */\n    var patch = JsonML.patch = function (elem, jml, filter) {\n\n      for (var i = 1; i < jml.length; i += 1) {\n        if (isArray(jml[i]) || 'string' === typeof jml[i]) {\n          // append children\n          appendDOM(elem, toHTML(jml[i], filter));\n\n        } else if (isMarkup(jml[i])) {\n          appendDOM(elem, toDOM(jml[i].value));\n\n        } else if ('object' === typeof jml[i] && jml[i] !== null && elem.nodeType === 1) {\n          // add attributes\n          elem = addAttributes(elem, jml[i]);\n        }\n      }\n\n      return elem;\n    };\n\n    /**\n     * Main builder entry point\n     * @ignore\n     * @param {string|array} jml\n     * @param {function} filter\n     * @return {Node}\n     */\n    var toHTML = JsonML.toHTML = function (jml, filter) {\n      try {\n        if (!jml) {\n          return null;\n        }\n        if ('string' === typeof jml) {\n          return document.createTextNode(jml);\n        }\n        if (isMarkup(jml)) {\n          return toDOM(jml.value);\n        }\n        if (!isArray(jml) || ('string' !== typeof jml[0])) {\n          throw new SyntaxError('invalid JsonML');\n        }\n\n        var tagName = jml[0]; // tagName\n        if (!tagName) {\n          // correctly handle a list of JsonML trees\n          // create a document fragment to hold elements\n          var frag = createElement('');\n          for (var i = 1; i < jml.length; i += 1) {\n            appendDOM(frag, toHTML(jml[i], filter));\n          }\n\n          // trim extraneous whitespace\n          trimWhitespace(frag);\n\n          // eliminate wrapper for single nodes\n          if (frag.childNodes.length === 1) {\n            return frag.firstChild;\n          }\n          return frag;\n        }\n\n        if (tagName.toLowerCase() === 'style' && document.createStyleSheet) {\n          // IE requires this interface for styles\n          patch(document.createStyleSheet(), jml, filter);\n          // in IE styles are effective immediately\n          return null;\n        }\n\n        var elem = patch(createElement(tagName), jml, filter);\n\n        // trim extraneous whitespace\n        trimWhitespace(elem);\n        return (elem && isFunction(filter)) ? filter(elem) : elem;\n      } catch (ex) {\n        try {\n          // handle error with complete context\n          var err = isFunction(JsonML.onerror) ? JsonML.onerror : onError;\n          return err(ex, jml, filter);\n        } catch (ex2) {\n          return document.createTextNode('[' + ex2 + ']');\n        }\n      }\n    };\n\n    /**\n     * Not super efficient.\n     * TODO: port render.js from DUEL\n     * @ignore\n     * @param {string|array} jml JsonML structure\n     * @return {string} HTML text\n     */\n    JsonML.toHTMLText = function (jml, filter) {\n      var elem = toHTML(jml, filter);\n      if (elem.outerHTML) {\n        return elem.outerHTML;\n      }\n\n      var parent = createElement('div');\n      parent.appendChild(elem);\n\n      var html = parent.innerHTML;\n      parent.removeChild(elem);\n\n      return html;\n    };\n\n  })(JsonML, document);\n}\n\nexport default JsonML;"]},"metadata":{},"sourceType":"module"}