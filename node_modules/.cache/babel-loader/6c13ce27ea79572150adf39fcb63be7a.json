{"ast":null,"code":"import ArrayReader from '../../../readers/ArrayReader';\nimport ValueReader from '../../../readers/ValueReader';\nexport default function SelectedItemsTask(selectedItemsOptionTask, itemsOptionTask) {\n  var _data = {\n    items: []\n  },\n      _hash = {},\n      _dataTemplate = new ArrayReader(new ValueReader([\"string\", \"number\"], true), true);\n\n  function process() {\n    var context = {\n      isChanged: false,\n      hash: _hash\n    },\n        selectedItems = selectedItemsOptionTask.getSelectedItems();\n    _data.items = _dataTemplate.read(_data.items, getSelectedItems(selectedItems), \"items\", context);\n    return context.isChanged;\n  }\n\n  function getSelectedItems(selectedItems) {\n    var result = [],\n        processed = {},\n        index,\n        len,\n        treeItemId;\n\n    for (index = 0, len = selectedItems.length; index < len; index += 1) {\n      treeItemId = selectedItems[index];\n\n      if (treeItemId != null && !processed.hasOwnProperty(treeItemId)) {\n        processed[treeItemId] = true;\n\n        if (itemsOptionTask.getConfig(treeItemId) != null) {\n          result.push(treeItemId);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function isSelected(itemid) {\n    return _hash.items.hasOwnProperty(itemid);\n  }\n\n  function getItems() {\n    return _data.items;\n  }\n\n  return {\n    process: process,\n    getItems: getItems,\n    isSelected: isSelected\n  };\n}\n;","map":{"version":3,"sources":["/Users/01005901/go/src/github.com/Resily/react/node_modules/basicprimitives/src/tasks/transformations/selection/SelectedItemsTask.js"],"names":["ArrayReader","ValueReader","SelectedItemsTask","selectedItemsOptionTask","itemsOptionTask","_data","items","_hash","_dataTemplate","process","context","isChanged","hash","selectedItems","getSelectedItems","read","result","processed","index","len","treeItemId","length","hasOwnProperty","getConfig","push","isSelected","itemid","getItems"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,8BAAxB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AAEA,eAAe,SAASC,iBAAT,CAA2BC,uBAA3B,EAAoDC,eAApD,EAAqE;AAClF,MAAIC,KAAK,GAAG;AACVC,IAAAA,KAAK,EAAE;AADG,GAAZ;AAAA,MAGEC,KAAK,GAAG,EAHV;AAAA,MAIEC,aAAa,GAAG,IAAIR,WAAJ,CACd,IAAIC,WAAJ,CAAgB,CAAC,QAAD,EAAW,QAAX,CAAhB,EAAsC,IAAtC,CADc,EAEd,IAFc,CAJlB;;AASA,WAASQ,OAAT,GAAmB;AACjB,QAAIC,OAAO,GAAG;AACZC,MAAAA,SAAS,EAAE,KADC;AAEZC,MAAAA,IAAI,EAAEL;AAFM,KAAd;AAAA,QAIEM,aAAa,GAAGV,uBAAuB,CAACW,gBAAxB,EAJlB;AAMAT,IAAAA,KAAK,CAACC,KAAN,GAAcE,aAAa,CAACO,IAAd,CAAmBV,KAAK,CAACC,KAAzB,EAAgCQ,gBAAgB,CAACD,aAAD,CAAhD,EAAiE,OAAjE,EAA0EH,OAA1E,CAAd;AAEA,WAAOA,OAAO,CAACC,SAAf;AACD;;AAED,WAASG,gBAAT,CAA0BD,aAA1B,EAAyC;AACvC,QAAIG,MAAM,GAAG,EAAb;AAAA,QACEC,SAAS,GAAG,EADd;AAAA,QAEEC,KAFF;AAAA,QAESC,GAFT;AAAA,QAGEC,UAHF;;AAKA,SAAKF,KAAK,GAAG,CAAR,EAAWC,GAAG,GAAGN,aAAa,CAACQ,MAApC,EAA4CH,KAAK,GAAGC,GAApD,EAAyDD,KAAK,IAAI,CAAlE,EAAqE;AACnEE,MAAAA,UAAU,GAAGP,aAAa,CAACK,KAAD,CAA1B;;AACA,UAAIE,UAAU,IAAI,IAAd,IAAsB,CAACH,SAAS,CAACK,cAAV,CAAyBF,UAAzB,CAA3B,EAAiE;AAC/DH,QAAAA,SAAS,CAACG,UAAD,CAAT,GAAwB,IAAxB;;AACA,YAAGhB,eAAe,CAACmB,SAAhB,CAA0BH,UAA1B,KAAyC,IAA5C,EAAkD;AAChDJ,UAAAA,MAAM,CAACQ,IAAP,CAAYJ,UAAZ;AACD;AACF;AACF;;AAED,WAAOJ,MAAP;AACD;;AAED,WAASS,UAAT,CAAoBC,MAApB,EAA4B;AAC1B,WAAOnB,KAAK,CAACD,KAAN,CAAYgB,cAAZ,CAA2BI,MAA3B,CAAP;AACD;;AAED,WAASC,QAAT,GAAoB;AAClB,WAAOtB,KAAK,CAACC,KAAb;AACD;;AAED,SAAO;AACLG,IAAAA,OAAO,EAAEA,OADJ;AAELkB,IAAAA,QAAQ,EAAEA,QAFL;AAGLF,IAAAA,UAAU,EAAEA;AAHP,GAAP;AAKD;AAAA","sourcesContent":["import ArrayReader from '../../../readers/ArrayReader';\nimport ValueReader from '../../../readers/ValueReader';\n\nexport default function SelectedItemsTask(selectedItemsOptionTask, itemsOptionTask) {\n  var _data = {\n    items: []\n  },\n    _hash = {},\n    _dataTemplate = new ArrayReader(\n      new ValueReader([\"string\", \"number\"], true),\n      true\n    );\n\n  function process() {\n    var context = {\n      isChanged: false,\n      hash: _hash\n    },\n      selectedItems = selectedItemsOptionTask.getSelectedItems();\n\n    _data.items = _dataTemplate.read(_data.items, getSelectedItems(selectedItems), \"items\", context);\n\n    return context.isChanged;\n  }\n\n  function getSelectedItems(selectedItems) {\n    var result = [],\n      processed = {},\n      index, len,\n      treeItemId;\n\n    for (index = 0, len = selectedItems.length; index < len; index += 1) {\n      treeItemId = selectedItems[index];\n      if (treeItemId != null && !processed.hasOwnProperty(treeItemId)) {\n        processed[treeItemId] = true;\n        if(itemsOptionTask.getConfig(treeItemId) != null) {\n          result.push(treeItemId);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function isSelected(itemid) {\n    return _hash.items.hasOwnProperty(itemid);\n  }\n\n  function getItems() {\n    return _data.items;\n  }\n\n  return {\n    process: process,\n    getItems: getItems,\n    isSelected: isSelected\n  };\n};"]},"metadata":{},"sourceType":"module"}